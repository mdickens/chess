<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chess Tests</title>
    <link rel="stylesheet" href="https://code.jquery.com/qunit/qunit-2.20.0.css">
    <script src="https://code.jquery.com/qunit/qunit-2.20.0.js"></script>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Chess Tests</h1>
    <div id="test-results"></div>

    <!-- Game UI structure from index.html -->
    <div id="game-setup-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>New Game</h2>
            <div id="game-mode-selection">
                <h3>Choose Game Mode</h3>
                <button class="game-mode-button" data-mode="pvp">Player vs. Player</button>
                <button class="game-mode-button" data-mode="pva">Player vs. AI</button>
            </div>
            <div id="ai-difficulty-selection" style="display: none;">
                <h3>Choose AI Difficulty</h3>
                <select id="ai-difficulty">
                    <option value="easy">Easy</option>
                    <option value="medium">Medium</option>
                    <option value="hard">Hard</option>
                </select>
                <h3>Choose Your Color</h3>
                <div id="color-selection">
                    <button class="color-button selected" data-color="white">White</button>
                    <button class="color-button" data-color="black">Black</button>
                </div>
            </div>
            <div class="modal-buttons">
                <button id="start-game-button">Start Game</button>
            </div>
        </div>
    </div>

    <div id="main-layout" style="display: block;">
        <div id="buttons">
            <button id="new-game-button">New Game</button>
            <button id="flip-board-button">Flip Board</button>
            <button id="takeback-button">Takeback</button>
            <button id="resign-button">Resign</button>
            <button id="claim-draw-button" disabled>Claim Draw</button>
            <button id="hint-button">Hint</button>
            <button id="help-button">Help</button>
        </div>
        <div id="white-captured" class="captured-panel"></div>
        <div id="board-container">
            <div id="chessboard"></div>
        </div>
        <div id="game-container">
            <div id="status-panel">
                <div id="status">White's turn</div>
                <div id="timers">
                    <div id="white-timer-box" class="timer-box">White: <span id="white-timer">10:00</span></div>
                    <div id="black-timer-box" class="timer-box">Black: <span id="black-timer">10:00</span></div>
                </div>
            </div>
        </div>
        <div id="black-captured" class="captured-panel"></div>
        <div id="move-history" class="move-history-panel"></div>
        <div id="ai-thinking-indicator" style="display: none;">AI is thinking...</div>
    </div>

    <div id="promotion-overlay" class="modal" style="display: none;">
        <div id="promotion-choices">
            <!-- Choices will be inserted here by JS -->
        </div>
    </div>

    <div id="game-over-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2 id="game-over-message"></h2>
            <div class="modal-buttons">
                <button id="new-game-over-button">New Game</button>
            </div>
        </div>
    </div>

    <div id="help-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
        </div>
    </div>

    <div id="confirmation-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2 id="confirmation-message">Are you sure?</h2>
            <div class="modal-buttons">
                <button id="confirm-yes">Yes</button>
                <button id="confirm-no">No</button>
            </div>
        </div>
    </div>

    <audio id="move-sound" src="../place.mp3"></audio>
    <audio id="capture-sound" src="../remove.mp3"></audio>
    <audio id="check-sound" src="../draw.mp3"></audio>

    <!-- Load Game Modules First -->
    <script src="../modules/game.js"></script>
    <script src="../modules/ai.js"></script>
    <script src="../modules/ui.js"></script>
    <script src="../modules/main.js"></script>
    
    <!-- Load Test Scripts -->
    <script src="tests.js"></script>
    <script src="black_first_move_test.js"></script>
    <script src="promotion_tests.js"></script>
    <script src="castling_tests.js"></script>
    <script src="check_tests.js"></script>
    <script src="en_passant_tests.js"></script>
    <script src="resign_test.js"></script>
    <script src="help_test.js"></script>
    <script src="layout_test.js"></script>
    <script src="timer_bug_test.js"></script>
</body>
</html>